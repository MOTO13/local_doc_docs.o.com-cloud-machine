<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Review and Configure Retention Policies</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="File storage in the cloud might be constrained so it&rsquo;s important to proactively manage limited file storage services by purging old instances and payloads." />
<meta name="dcterms.created" content="2017-04-07T15:50:17Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Public Cloud Machine Using Oracle Managed File Transfer Cloud Service" />
<meta name="dcterms.identifier" content="E78504-03" />
<meta name="dcterms.isVersionOf" content="MFTCS" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2016, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="GUID-C7712462-BEFB-4DAA-93F7-8832F3423033.htm" title="Previous" type="text/html" />
<link rel="Next" href="GUID-2F2E8B91-CEAF-46E1-BC37-1253A28B8763.htm" title="Next" type="text/html" />
<link rel="alternate" href="MFTCS.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="MFTCS.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="MFTCS.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-29A69D7C-AB33-4426-844D-201DEE715261"></a> <span id="PAGE" style="display:none;">13/14</span> <!-- End Header -->
<h1 id="MFTCS-GUID-29A69D7C-AB33-4426-844D-201DEE715261" class="sect1">Review and Configure Retention Policies</h1>
<div>
<p>File storage in the cloud might be constrained so it&rsquo;s important to proactively manage limited file storage services by purging old instances and payloads.</p>
<p>In order to keep your database and storage resources from filling up, periodically purge artifacts from previous transfers. By default, Oracle Managed File Transfer Cloud Service checks daily at 8:00 AM for files that have been around longer than seven days and purges any that it finds. You can change these default values to suit your needs. How often you purge depends on your usage as does the length of time you retain the artifacts.</p>
<p>The tasks in the following topics describe how to change the retention value and the schedule.</p>
<div class="section">
<p class="subhead1">Topics</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-29A69D7C-AB33-4426-844D-201DEE715261.htm#GUID-E4F0B140-05A3-47BE-9E90-7B0172E5510F" title="If you want to change the length of time you retain transfer artifacts such as old instances and payloads, edit the purgeInstanceData.py file located on each MFT managed server.">Changing the Purge Retention Policy</a></p>
</li>
<li>
<p><a href="GUID-29A69D7C-AB33-4426-844D-201DEE715261.htm#GUID-9A2D6C02-F991-4CE3-86A4-3F43D3DFF3BB" title="By default, Oracle Managed File Transfer Cloud Service checks daily at 8:00 AM for files that have been around longer than the retention value and purges any that it finds. You can change the schedule to suit your needs. How often you purge depends on your usage.">Changing the Purge Schedule</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<div class="sect2"><a id="GUID-E4F0B140-05A3-47BE-9E90-7B0172E5510F"></a>
<h2 id="MFTCS-GUID-E4F0B140-05A3-47BE-9E90-7B0172E5510F" class="sect2">Changing the Purge Retention Policy</h2>
<div>
<p>If you want to change the length of time you retain transfer artifacts such as old instances and payloads, edit the <code>purgeInstanceData.py</code> file located on each MFT managed server.</p>
<div class="section">The following steps describe how to change the retention policy.</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span><code>ssh</code> to the <code>mft-purge</code> directory located under the domain home directory on each managed server VM.</span></li>
<li class="stepexpand"><span><span class="bold">On each MFT managed server</span>, modify the retention days value by editing the following line in <code>purgeInstanceData.py</code>.</span>
<div>
<pre dir="ltr">
<span class="bold">retentionDays = 7</span>  # Duration for which MFT Data has to be retained during purge operation
</pre>
<p>For example:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">retentionDays = 7</code> purges all data older than 1 week (default)</p>
</li>
<li>
<p><code class="codeph">retentionDays = 14</code> purges all data older than 2 weeks</p>
</li>
<li>
<p><code class="codeph">retentionDays = 1</code> purges all data older than 1 day</p>
</li>
</ul>
<div class="infobox-note" id="GUID-E4F0B140-05A3-47BE-9E90-7B0172E5510F__GUID-AC3215B7-8104-4384-BFCD-027456494C52">
<p class="notep1">Note:</p>
This file can be edited at any time and the change takes effect for all future scheduled purges.</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2"><a id="GUID-9A2D6C02-F991-4CE3-86A4-3F43D3DFF3BB"></a>
<h2 id="MFTCS-GUID-9A2D6C02-F991-4CE3-86A4-3F43D3DFF3BB" class="sect2">Changing the Purge Schedule</h2>
<div>
<p>By default, Oracle Managed File Transfer Cloud Service checks daily at 8:00 AM for files that have been around longer than the retention value and purges any that it finds. You can change the schedule to suit your needs. How often you purge depends on your usage.</p>
<div class="p">
<div class="infobox-note" id="GUID-9A2D6C02-F991-4CE3-86A4-3F43D3DFF3BB__GUID-D5620248-ECA7-4024-A774-71B62883B26E">
<p class="notep1">Note:</p>
Follow these instructions if you are using Oracle Managed File Transfer Cloud Service versions 12.1.3 or 12.2.1. If using version 12.2.1.2, you can perform this task from the Administration page of the Oracle Managed File Transfer Console.</div>
</div>
<!-- class="section" -->
<div class="section">The following steps describe how to change the schedule by editing the<code>purge_schedule.py</code> script, stopping and deleting the original scheduler job and then running the <code>startSchedulePurge.sh</code> script to start the new schedule.</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span><code>ssh</code> to the <code>mft-purge</code> directory located under the domain home directory on each managed server VM.</span></li>
<li class="stepexpand"><span><span class="bold">On each MFT managed server</span>, modify the purge schedule by editing the values for <code class="codeph">frequency</code>, <code class="codeph">interval</code>, and <code class="codeph">begin_time</code> in the following line in <code>purge_schedule.py</code>.</span>
<div>
<pre dir="ltr">
manageSchedulerSchedule('CREATE', 'MFTCustomHostingApp',schName = scheduleName, <span class="bold">frequency = 'DAY'</span>,<span class="bold">interval = 1</span>,<span class="bold">begin_time = '08:00:00:01:01:2015</span>')
</pre>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">frequency</span>:&nbsp; The frequency of recurrence. Valid values are: [SECOND, MINUTE,HOUR,DAY, WEEK,MONTH, YEAR]</p>
</li>
<li>
<p><span class="bold">interval</span>:&nbsp; The integer value specifying the repeat interval for <code class="codeph">frequency</code>. For example, an <code class="codeph">interval</code> value of 2 combined with a <code class="codeph">frequency</code> of <code class="codeph">WEEK</code>, runs once every 2 weeks.</p>
</li>
<li>
<p><span class="bold">begin_time</span>: The start time for the recurring schedule. The format is: HH:MM:SS:DD:MM:YYYY</p>
</li>
</ul>
<p>Examples:</p>
<ul style="list-style-type: disc;">
<li>
<p>To run once per day at 8:00 AM:</p>
<pre dir="ltr">
manageSchedulerSchedule('CREATE', 'MFTCustomHostingApp',schName = scheduleName, frequency = 'DAY',interval = 1, begin_time = '08:00:00:01:01:2016')
</pre></li>
<li>
<p>To run every two days at 8:00 AM:</p>
<pre dir="ltr">
manageSchedulerSchedule('CREATE', 'MFTCustomHostingApp',schName = scheduleName, frequency = 'DAY',interval = 2, begin_time = '08:00:00:01:01:2016') 
</pre></li>
<li>
<p>To run once per week at midnight:</p>
<pre dir="ltr">
manageSchedulerSchedule('CREATE', 'MFTCustomHostingApp',schName = scheduleName, frequency = 'WEEK',interval = 1, begin_time = '00:00:00:01:01:2016') 
</pre></li>
</ul>
</div>
</li>
<li class="stepexpand"><span><span class="bold">On any one of the running managed servers</span>, follow these steps to cancel all existing jobs associated with the schedule.</span>
<ol>
<li class="substepexpand"><span>Log in to the Oracle Enterprise Manager (EM) console.</span></li>
<li class="substepexpand"><span>Find <span class="bold">Scheduling Services</span> in the EM user interface.</span></li>
<li class="substepexpand"><span>Click <span class="bold">ESSAPP(<span class="variable">mft_managed_server</span>)</span>. For example, <span class="bold">ESSAP(mft_server1)</span>.</span></li>
<li class="substepexpand"><span>Click <span class="bold">Show All Running Jobs</span>.</span></li>
<li class="substepexpand"><span>A search menu should appear. Find the name of the job you want to delete.</span>
<div>See:
<ul style="list-style-type: disc;">
<li>
<p><a href="http://www.oracle.com/pls/topic/lookup?ctx=fmw122120&amp;id=ESSAG1073" target="_blank">Searching for Oracle Enterprise Scheduler Job Requests 12.2.1.2</a></p>
</li>
<li>
<p><a href="http://www.oracle.com/pls/topic/lookup?ctx=fmw121300&amp;id=ESSAG1073" target="_blank">Searching for Oracle Enterprise Scheduler Job Requests 12.1.3</a></p>
</li>
</ul>
</div>
</li>
<li class="substepexpand"><span>Click the job request that corresponds to the job you want to delete.</span></li>
<li class="substepexpand"><span>Click <span class="bold">Actions</span> and then select <span class="bold">Cancel</span> to stop the job.</span></li>
</ol>
</li>
<li class="stepexpand"><span>Connect to WLST.</span>
<ol>
<li class="substepexpand"><span><code>ssh</code> to any one of the MFT managed server virtual machines and log in.</span></li>
<li class="substepexpand"><span><code>cd</code> to the <code>bin</code> directory under the MFT installation directory:</span>
<div>
<p><code class="codeph">cd</code> <span class="variable">mft_installation_directory</span><code class="codeph">/oracle_common/common/bin</code></p>
</div>
</li>
<li class="substepexpand"><span>Run the <code>./wlst.sh</code> command.</span></li>
<li class="substepexpand"><span>Use the following command to connect to the server:</span>
<div>
<p><code class="codeph">connect(&rsquo;</code><span class="variable">username</span><code class="codeph">&rsquo;,&rsquo;</code><span class="variable">password</span><code class="codeph">&rsquo;,&rsquo;t3://</code><span class="variable">url_to_server</span>:<span class="variable">port_number</span><code class="codeph">&rsquo;);</code></p>
</div>
</li>
</ol>
</li>
<li class="stepexpand"><span>Use the following commands to delete the schedule that you want to update:</span>
<div>
<pre dir="ltr">
manageSchedulerSchedule('DELETE','MFTCustomHostingApp',schName='mft/purgeMFTInstances')
manageSchedulerJobDefn('DELETE','MFTCustomHostingApp',jobName='mft/MFT_Purge')
</pre></div>
</li>
<li class="stepexpand"><span>Use the following commands to verify that the schedule and job have been deleted from the hosting application.</span>
<ol>
<li class="substepexpand"><span><code class="codeph">manageSchedulerJobDefn('SHOW','MFTCustomHostingApp')</code></span>
<div>This command lists jobs running on the hosting application. Verify that the job definition you deleted is not listed.</div>
</li>
<li class="substepexpand"><span><code class="codeph">manageSchedulerSchedule('SHOW','MFTCustomHostingApp')</code></span>
<div>This command lists schedules running on the hosting application. Verify that the schedule you deleted is not listed.</div>
</li>
</ol>
</li>
<li class="stepexpand"><span><span class="bold">On any one of the Oracle Managed File Transfer managed server nodes</span>, run the <code>startSchedulePurge.sh</code> script located in the <code>mft-purge</code> directory located under the domain home directory on each managed server VM .</span></li>
</ol>
<div class="section">
<div class="p">To read more about running Oracle Enterprise Scheduler WLST commands, see:
<ul style="list-style-type: disc;">
<li>
<p><a href="http://www.oracle.com/pls/topic/lookup?ctx=fmw122120&amp;id=SOACR11446" target="_blank">Oracle Enterprise Scheduler Custom WLST Commands 12.2.1.2</a></p>
</li>
<li>
<p><a href="http://www.oracle.com/pls/topic/lookup?ctx=fmw121300&amp;id=SOACR11446" target="_blank">Oracle Enterprise Scheduler Custom WLST Commands 12.1.3</a></p>
</li>
</ul>
</div>
<div class="p">To read more about using Oracle Enterprise Manager to monitor Oracle Enterprise Scheduler jobs, see:
<ul style="list-style-type: disc;">
<li>
<p><a href="http://www.oracle.com/pls/topic/lookup?ctx=fmw122120&amp;id=ESSAG4125" target="_blank">Managing Oracle Enterprise Scheduler Requests 12.2.1.2</a></p>
</li>
<li>
<p><a href="http://www.oracle.com/pls/topic/lookup?ctx=fmw121300&amp;id=ESSAG4125" target="_blank">Managing Oracle Enterprise Scheduler Requests 12.1.3</a></p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1">
<tr>
<td class="cellalignment10">
<table class="cellalignment6">
<tr>
<td class="cellalignment5"><a href="GUID-C7712462-BEFB-4DAA-93F7-8832F3423033.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5"><a href="GUID-2F2E8B91-CEAF-46E1-BC37-1253A28B8763.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2016, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment12">
<table class="cellalignment4">
<tr>
<td class="cellalignment5"><a href="../index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>

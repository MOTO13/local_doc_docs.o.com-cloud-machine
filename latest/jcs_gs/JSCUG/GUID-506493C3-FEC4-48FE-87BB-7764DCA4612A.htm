<!DOCTYPE html>
<html lang="en-US">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Scaling the Coherence Data Tier of an Oracle Java Cloud Service Instance on OPCM</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="The Coherence data tier of an Oracle Java Cloud Service&mdash;Coherence instance is scaled independently of the application tier. You can use the Oracle Java Cloud Service Console or the REST API to scale the Coherence data tier." />
<meta name="dcterms.created" content="2017-04-07T16:50:28Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Public Cloud Machine Using Oracle Java Cloud Service" />
<meta name="dcterms.identifier" content="E66979-05" />
<meta name="dcterms.isVersionOf" content="JSCUG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2016, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="GUID-99880EDC-768B-455E-B7F4-22254FD01B42.htm" title="Previous" type="text/html" />
<link rel="Next" href="GUID-627556AD-A3A2-451D-95D7-9F6E1E8F0AEF.htm" title="Next" type="text/html" />
<link rel="alternate" href="JSCUG.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="JSCUG.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="JSCUG.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-506493C3-FEC4-48FE-87BB-7764DCA4612A"></a> <span id="PAGE" style="display:none;">113/131</span> <!-- End Header -->
<h1 id="JSCUG-GUID-506493C3-FEC4-48FE-87BB-7764DCA4612A" class="sect1">Scaling the Coherence Data Tier of an <span>Oracle Java Cloud Service</span> Instance <span>on <span>OPCM</span></span></h1>
<div>
<p>The Coherence data tier of an <span>Oracle Java Cloud Service&mdash;Coherence</span> instance is scaled independently of the application tier. You can use the <span>Oracle Java Cloud Service</span> Console or the REST API to scale the Coherence data tier.</p>
<p>To use the REST API to scale the Coherence data tier, see <span><a href="../JSRMR/op-paas-service-jcs-api-v1.1-instances-%7BidentityDomainId%7D-%7BserviceId%7D-clusters-%7BclusterName%7D-put.html" target="_blank">Scale a Coherence Data Tier</a></span> in <cite>REST API for Oracle Java Cloud Service</cite>.</p>
<p>To scale the application tier of a service instance, see <a href="GUID-6BAA26CA-B304-4C0E-AC00-3E47512EED88.htm#GUID-6BAA26CA-B304-4C0E-AC00-3E47512EED88" title="You can scale out an Oracle Java Cloud Service cluster to add one node to the cluster. When you scale out, Oracle Java Cloud Service creates a new VM running a WebLogic Server Managed Server instance.">Scaling Out an Oracle Java Cloud Service Cluster</a>, <a href="GUID-3054AC97-E2C6-45DE-818E-33671C0C8280.htm#GUID-3054AC97-E2C6-45DE-818E-33671C0C8280" title="You can scale in an Oracle Java Cloud Service cluster to remove a selected node from the cluster. When you scale in, Oracle Java Cloud Service removes the selected WebLogic Server Managed Server instance and the VM that it is running on.">Scaling In an Oracle Java Cloud Service Cluster</a>, and <a href="GUID-8DD460BA-708C-4B90-822F-4E4D64C59F77.htm#GUID-8DD460BA-708C-4B90-822F-4E4D64C59F77" title="You can scale an Oracle Java Cloud Service node to change its compute shape in response to changes in workload or to add storage to a node that is running out of storage. However, you cannot remove block storage from a node.">Scaling an Oracle Java Cloud Service Node</a>.</p>
<div class="infobox-note" id="GUID-506493C3-FEC4-48FE-87BB-7764DCA4612A__GUID-54A5C077-899B-43B4-85A2-E8F10EDA0227">
<p class="notep1">Note:</p>
This section does not apply to <span>Oracle Java Cloud Service&mdash;Coherence</span> instances provisioned with the <span>Oracle Java Cloud Service</span>&mdash;Virtual Image service level. Scaling by using the <span>Oracle Java Cloud Service</span> Console or the REST API is not supported by <span>Oracle Java Cloud Service</span>&mdash;Virtual Image instances.</div>
<div class="section">
<p class="subhead1">Topics:</p>
</div>
<!-- class="section" -->
<ul style="list-style-type: disc;">
<li>
<p><a href="GUID-506493C3-FEC4-48FE-87BB-7764DCA4612A.htm#GUID-43B12F2A-B2EA-4CBC-AB98-9160033F13C3" title="Scaling the Coherence data tier of an Oracle Java Cloud Service&mdash;Coherence instance means you're adding or removing a predefined number of virtual machines (VMs) and Managed Coherence Servers (or JVMs), thereby increasing or decreasing the total cache capacity to allocate for Coherence in the domain.">Considerations When Scaling the Coherence Data Tier of an Oracle Java Cloud Service Instance</a></p>
</li>
<li>
<p><a href="GUID-506493C3-FEC4-48FE-87BB-7764DCA4612A.htm#GUID-FC95A5B6-DE4F-4713-809C-79E7C4215597" title="To increase or decrease the Coherence cache capacity for an Oracle Java Cloud Service&mdash;Coherence instance, you can use the Oracle Java Cloud Service Console to scale out or scale in the Coherence data tier by adding or removing one capacity unit at a time.">Scaling the Coherence Data Tier by Using the Oracle Java Cloud Service Console</a></p>
</li>
</ul>
</div>
<div class="sect2"><a id="GUID-43B12F2A-B2EA-4CBC-AB98-9160033F13C3"></a>
<h2 id="JSCUG-GUID-43B12F2A-B2EA-4CBC-AB98-9160033F13C3" class="sect2">Considerations When Scaling the Coherence Data Tier of an Oracle Java Cloud Service Instance</h2>
<div>
<p>Scaling the Coherence data tier of an <span>Oracle Java Cloud Service&mdash;Coherence</span> instance means you're adding or removing a predefined number of virtual machines (VMs) and Managed Coherence Servers (or JVMs), thereby increasing or decreasing the total cache capacity to allocate for Coherence in the domain.</p>
<p>When your <span>Oracle Java Cloud Service&mdash;Coherence</span> instance was created, you either used a default capacity unit or defined a custom capacity unit for the service instance. The number of VMs and JVMs to add or remove during a scaling operation is predetermined by the capacity unit definition you declared for the service instance during initial provisioning. You cannot change the definition of your capacity unit when you scale the Coherence data tier.</p>
<p>At any time during a scaling operation, you can check the job status by opening the Activity page. See <a href="GUID-BD8C7EA1-460C-48A7-B6C7-2E7665D2A73E.htm#GUID-BD8C7EA1-460C-48A7-B6C7-2E7665D2A73E" title="You can view scaling requests to check the status of ongoing scaling requests, and the success or failure of previous requests.">Viewing Scaling Requests</a>.</p>
<div class="section">
<p class="subhead2">About Using the Oracle Java Cloud Service Console</p>
<p>When you use the Oracle Java Cloud Service Console to initiate a scaling operation, you can add or remove only one capacity unit at a time. Whether you're scaling out or scaling in, the scaling process always adds or removes the appropriate number of VMs and server nodes as defined by one capacity unit, increasing or decreasing the total primary cache storage to allocate for Coherence by the amount of cache capacity as preconfigured by one capacity unit.</p>
<p>Note the following when scaling in the Coherence data tier:</p>
<ul style="list-style-type: disc;">
<li>
<p>You can choose to remove a specific capacity unit or let the scaling process remove any one capacity unit.</p>
</li>
<li>
<p>When there&rsquo;s only one capacity unit on the Coherence data tier, the remove option is disabled.</p>
</li>
<li>
<p>During a scale in operation, data is maintained by checking that the Coherence cluster has a <code class="codeph">StatusHA</code> value of <code class="codeph">NODE-SAFE</code> before removing a node. If the Coherence data tier has less than three nodes in total, the check isn&rsquo;t performed.</p>
<p>Select the Force Remove checkbox to remove the capacity unit even if there&rsquo;s any failure during the scaling process.</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">About Using the REST API</p>
<p>When you use the REST API to initiate a scaling operation, you specify the number of capacity units you want for the entire Coherence data tier. Based on the capacity unit count requested, the current capacity unit count, and the capacity unit definition declared for the service instance when the Coherence data tier was created, the scaling process then performs either a scale out operation to add more server nodes or a scale in operation to remove nodes.</p>
<p>For example, if the Coherence data tier currently has a capacity unit count of 2 and you specify a unit count of 3, the scaling process initiates a scale out operation to provision 1 more capacity unit, adding and configuring the appropriate number of Managed Coherence Servers as defined in one capacity unit. Note that you can scale out by one capacity unit at a time only.</p>
<p>For more information, see <span><a href="../JSRMR/op-paas-service-jcs-api-v1.1-instances-%7BidentityDomainId%7D-%7BserviceId%7D-clusters-%7BclusterName%7D-put.html" target="_blank">Scale a Coherence Data Tier</a></span> in <span><cite>REST API for Oracle Java Cloud Service</cite></span>.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect2"><a id="GUID-FC95A5B6-DE4F-4713-809C-79E7C4215597"></a>
<h2 id="JSCUG-GUID-FC95A5B6-DE4F-4713-809C-79E7C4215597" class="sect2">Scaling the Coherence Data Tier by Using the Oracle Java Cloud Service Console</h2>
<div>
<p>To increase or decrease the Coherence cache capacity for an <span>Oracle Java Cloud Service&mdash;Coherence</span> instance, you can use the Oracle Java Cloud Service Console to scale out or scale in the Coherence data tier by adding or removing one capacity unit at a time.</p>
<div class="section">
<p>Based on the capacity unit configuration that was declared for the service instance when it was provisioned, the following occurs when you scale the Coherence data tier:</p>
<ul style="list-style-type: disc;">
<li>
<p>The appropriate number of nodes as was provisioned by one capacity unit are added to or removed from your service instance</p>
</li>
<li>
<p>The total primary cache storage to allocate for Coherence is increased or decreased by the amount of cache capacity as was predefined by one capacity unit</p>
</li>
</ul>
<div class="infobox-note" id="GUID-FC95A5B6-DE4F-4713-809C-79E7C4215597__GUID-E46BDF3A-71D9-4118-BE51-DA7713D6BCBE">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>You cannot use the scaling operation to delete the entire Coherence data tier by removing one capacity unit at a time until all nodes are deleted.</p>
</li>
<li>
<p>When scaling in, you can remove a specific capacity unit or let the scaling process remove any one capacity unit.</p>
</li>
<li>
<p>You cannot scale the Coherence data tier when the Oracle Java Cloud Service instance is in a stopped state.</p>
</li>
</ul>
</div>
<p>To scale the Coherence data tier by using the Oracle Java Cloud Service Console:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>From the <span class="wintitle">Services</span> page of the <span>Oracle Java Cloud Service</span> Console, click an existing service instance.</span>
<div>The <span class="wintitle">Overview</span> page is displayed.</div>
</li>
<li class="stepexpand"><span>Navigate to the Topology page.</span></li>
<li class="stepexpand"><span>To scale out by adding one capacity unit, do the following:</span>
<ol>
<li class="substepexpand"><span>In the Coherence Data Tier section, click <img width="14" height="15" src="img/GUID-D0E9F26E-D981-4A6C-9C9C-E53E732DCDA2-default.gif" alt="menu icon" title="menu icon" /> (next to OCPUs) and choose <span class="bold">Add Capacity Unit</span> to add nodes and increase capacity.</span>
<div>A confirmation dialog is displayed, asking you to confirm that you want to add a capacity unit.</div>
</li>
<li class="substepexpand"><span>Click <span class="bold">Add Capacity Unit</span> to confirm.</span>
<div>A message saying that the request has been submitted is displayed.</div>
</li>
<li class="substepexpand"><span>Proceed to step 5.</span></li>
</ol>
</li>
<li class="stepexpand"><span>To scale in by letting the operation remove <span class="italic">any</span> one capacity unit, do the following:</span>
<ol>
<li class="substepexpand"><span>In the Coherence Data Tier section, click <img width="14" height="15" src="img/GUID-D0E9F26E-D981-4A6C-9C9C-E53E732DCDA2-default.gif" alt="menu icon" title="menu icon" /> (next to OCPUs) and choose <span class="bold">Remove Capacity Unit</span> to remove nodes and decrease capacity.</span>
<div>Note that the Remove Capacity Unit option is disabled when there&rsquo;s only one capacity unit on the data tier.</div>
<div>A confirmation dialog is displayed, asking you to confirm that you want to delete any one capacity unit.</div>
</li>
<li class="substepexpand"><span>Select the Force Remove checkbox to allow the operation to remove the capacity unit even if there&rsquo;s any failure during the process.</span></li>
<li class="substepexpand"><span>Click <span class="bold">Remove Capacity Unit</span>.</span>
<div>A message saying that the request has been submitted is displayed.</div>
</li>
<li class="substepexpand"><span>Proceed to step 5.</span></li>
</ol>
</li>
<li class="stepexpand"><span>To scale in by removing a <span class="italic">specific</span> capacity unit, do the following:</span>
<ol>
<li class="substepexpand"><span>Click <img width="24" height="24" src="img/GUID-5F6DFD64-7A49-4367-B87C-A19BF7DE07B0-default.png" alt="disclose icon" title="disclose icon" /> next to the Coherence Data Tier icon.</span>
<div>The section expands to show the individual capacity units configured for your service.</div>
</li>
<li class="substepexpand"><span>Review the list of capacity units and their Managed Servers to confirm the capacity unit you want to remove. Then on the row of the capacity unit that you want to remove, click <img width="14" height="15" src="img/GUID-D0E9F26E-D981-4A6C-9C9C-E53E732DCDA2-default.gif" alt="menu icon" title="menu icon" /> and choose <span class="bold">Remove</span>.</span>
<div>Note that if there&rsquo;s only one capacity unit, the <img width="14" height="15" src="img/GUID-D0E9F26E-D981-4A6C-9C9C-E53E732DCDA2-default.gif" alt="menu icon" title="menu icon" /> icon is disabled or not available.</div>
<div>A confirmation dialog is displayed, asking you to confirm that you want to remove that particular capacity unit and its Managed Servers.</div>
</li>
<li class="substepexpand"><span>Select the Force Remove checkbox to allow the operation to remove the capacity unit even if there&rsquo;s any failure during the process.</span></li>
<li class="substepexpand"><span>Click <span class="bold">Remove Capacity Unit</span>.</span>
<div>A message saying that the request has been submitted is displayed.</div>
</li>
<li class="substepexpand"><span>Proceed to step 5.</span></li>
</ol>
</li>
<li class="stepexpand"><span>After a few moments, click <img width="23" height="22" src="img/GUID-08E43FD3-B338-4802-8EBB-C8ABD091FB88-default.png" alt="Refresh icon" title="Refresh icon" /> to update the console (you might need to do this more than once).</span>
<div>After a few moments of processing, the number of nodes and cache capacity will be updated in the Coherence Data Tier section. If a scale out operation is performed, the new node information is displayed when you expand the section to view the capacity unit details. See <a href="GUID-BD8C7EA1-460C-48A7-B6C7-2E7665D2A73E.htm#GUID-BD8C7EA1-460C-48A7-B6C7-2E7665D2A73E" title="You can view scaling requests to check the status of ongoing scaling requests, and the success or failure of previous requests.">Viewing Scaling Requests</a> for information about how to check the status of an ongoing scaling operation as well as previous scaling operations.</div>
</li>
</ol>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment15">
<tr>
<td class="cellalignment22">
<table class="cellalignment20">
<tr>
<td class="cellalignment19"><a href="GUID-99880EDC-768B-455E-B7F4-22254FD01B42.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment19"><a href="GUID-627556AD-A3A2-451D-95D7-9F6E1E8F0AEF.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2016, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment24">
<table class="cellalignment18">
<tr>
<td class="cellalignment19"><a href="../index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment19"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment19"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>

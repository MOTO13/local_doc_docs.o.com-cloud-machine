<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- saved from url=(0023)https://docs.oracle.com -->
        <title>REST API for Oracle Java Cloud Service - Scale a Coherence Data Tier</title>
        <link rel="stylesheet" href="/sp_common/rest-template/ohc-rest-template/css/rest.css">
        <script>
            document.write('<style type="text/css">');
            document.write('body > .noscript, body > .noscript ~ * { opacity: 0; }');
            document.write('</style>');
        </script>
        <script data-main="/sp_common/rest-template/ohc-rest-template/js/rest-config" src="/sp_common/rest-template/requirejs/require.js"></script>
        <script>
            if(window.require === undefined) {
                document.write('<script data-main="sp_common/rest-template/ohc-rest-template/js/rest-config" src="sp_common/rest-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/rest-template/ohc-rest-template/css/rest.css" rel="stylesheet">');
            }
        </script>
        <meta name="description" content="Describes how to use the Oracle Java Cloud Service REST API to create and manage WebLogic Server instances on both Oracle Public Cloud and Oracle Cloud Machine, unless otherwise indicated.">
        <meta property="og:site_name" content="Oracle Help Center">
        <meta property="og:title" content="REST API for Oracle Java Cloud Service">
        <meta property="og:description" content="Describes how to use the Oracle Java Cloud Service REST API to create and manage WebLogic Server instances on both Oracle Public Cloud and Oracle Cloud Machine, unless otherwise indicated.">
        <meta name="generator" content="Oracle REST API Publisher">
        <link rel="shortcut icon" href="/sp_common/rest-template/ohc-common/img/favicon.ico">
        <meta name="application-name" content="REST API for Oracle Java Cloud Service">
        <link type="application/swagger+json" title="Swagger 2.0" href="swagger.json" rel="alternate">
        <link rel="prev" href="op-paas-service-jcs-api-v1.1-instances-%7BidentityDomainId%7D-%7BserviceId%7D-clusters-%7BclusterName%7D-delete.html" title="Previous" type="text/html">
        <link rel="next" href="op-paas-service-jcs-api-v1.1-datagrid-%7BidentityDomainId%7D-config-scalingUnits-defaultScalingUnits-get.html" title="Next" type="text/html">
    <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
    <body>
        <div class="noscript alert alert-danger text-center" role="alert">
            <a class="pull-left" href="op-paas-service-jcs-api-v1.1-instances-%7BidentityDomainId%7D-%7BserviceId%7D-clusters-%7BclusterName%7D-delete.html"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
            <a class="pull-right" href="op-paas-service-jcs-api-v1.1-datagrid-%7BidentityDomainId%7D-config-scalingUnits-defaultScalingUnits-get.html">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
            <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        </div>
        <article>

            
            <header>

                <ol class="breadcrumb">
                    <li><a href="index.html">REST API for Oracle Java Cloud Service</a></li>
                    <li>Tasks</li>
                    
                    <li class="active">
                        
                        <a href="api-Coherence%20Data%20Tiers.html">Coherence Data Tiers</a>
                        
                    </li>
                    
                </ol>
                
                <p class="draftsubtitle"></p>
                
                <h2>Scale a Coherence Data Tier</h2>
                <div>
                    <div class="label label-put text-uppercase">put</div>
                    <p style="word-break: break-word;"><strong>/paas/service/jcs/api/v1.1/instances/{identityDomainId}/{serviceId}/clusters/{clusterName}</strong></p>
                </div>
            </header>
            <section>

                <div class="description">Scales the Coherence data tier or storage-enabled WebLogic Server cluster of an Oracle Java Cloud Service instance by performing either a scale out or a scale in, based on the capacity unit count requested and the current capacity unit count. Note that you can scale out by one capacity unit at a time only.<p>The Coherence data tier of a service instance is scaled independently of the application tier. Scaling of the Coherence data tier involves adding or removing a specific number of capacity units.<p>The number of VMs and Managed Servers to add or remove during a scaling operation is predetermined by the capacity unit definition declared for the service when the Coherence data tier was created. You cannot change the definition of your capacity unit when you scale the Coherence data tier.<p>On Oracle Public Cloud, see <a href='http://www.oracle.com/pls/topic/lookup?ctx=cloud&id=JSCUG-GUID-43B12F2A-B2EA-4CBC-AB98-9160033F13C3' target='_blank'>Considerations When Scaling the Coherence Data Tier of an Oracle Java Cloud Service Instance</a> in <i>Using Oracle Java Cloud Service</i> for information about scaling the Coherence data tier. On Oracle Cloud Machine, see <a href='http://www.oracle.com/pls/topic/lookup?ctx=cloudopcm&id=JSCUG-GUID-43B12F2A-B2EA-4CBC-AB98-9160033F13C3' target='_blank'>Considerations When Scaling the Coherence Data Tier of an Oracle Java Cloud Service Instance</a> in <i>Using Oracle Java Cloud Service on OPCM</i>.<p><b>Note:</b> The term <i>scaling unit</i> used in the REST API means the same as capacity unit.</div>

                <div role="tabpanel">

                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs hidden-print" role="tablist">
                        <li role="presentation" class="active"><a href="#request" aria-controls="request" role="tab" data-toggle="tab"><span class="hidden-xs glyphicon glyphicon-log-in" aria-hidden="true"></span> Request</a></li>
                        <li role="presentation"><a href="#response" aria-controls="response" role="tab" data-toggle="tab"><span class="hidden-xs glyphicon glyphicon-log-out" aria-hidden="true"></span> Response</a></li>
                        
                        <li role="presentation"><a href="#examples" aria-controls="examples" role="tab" data-toggle="tab"><span class="hidden-xs glyphicon glyphicon-edit" aria-hidden="true"></span> Examples</a></li>
                        
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane fade active in" id="request">
                            <h3 class="visible-print-block">Request</h3>
                            

                            
                            
                            <div class="panel panel-default">
                                <div class="panel-heading">Supported Media Types</div>
                                <div class="panel-body">
                                    <ul class="list-group">
                                        
                                        <li class="list-group-item">application/vnd.com.oracle.oracloud.datagrid.Service+json</li>
                                                    
                                    </ul>
                                </div>
                            </div>
                            
                            

                            
                            <div class="panel panel-default">
                                <div class="panel-heading">Path Parameters</div>
                                <div style="padding-bottom: 0px; padding-top: 0px" class="panel-body">
                                    <div class="schema-container">
                                    <dl style="margin-bottom: 0px" class="schema-properties">
                                        
                                        <dt>clusterName</dt>
                                        <dd>
                                            


<div>Type: <code>string</code></div>







<div>Required: <code>true</code></div>







































<div>Name of the Coherence data tier cluster in the service instance to scale.</div>


<div class="panel-group" role="tablist" aria-multiselectable="true">


















                                        </dd>
                                        
                                        <dt>identityDomainId</dt>
                                        <dd>
                                            


<div>Type: <code>string</code></div>







<div>Required: <code>true</code></div>







































<div>Identity domain ID for the Oracle Java Cloud Service account (on Oracle Public Cloud).<p>Tenant name for the Oracle Java Cloud Service instance (on Oracle Cloud Machine).</div>


<div class="panel-group" role="tablist" aria-multiselectable="true">


















                                        </dd>
                                        
                                        <dt>serviceId</dt>
                                        <dd>
                                            


<div>Type: <code>string</code></div>







<div>Required: <code>true</code></div>







































<div>Name of the Oracle Java Cloud Service-Coherence instance.</div>


<div class="panel-group" role="tablist" aria-multiselectable="true">


















                                        </dd>
                                        
                                    </dl>
                                        
                                   </div>
                                </div>
                            </div>
                            

                            
                            
                            

                            
                            <div class="panel panel-default">
                                <div class="panel-heading">Header Parameters</div>
                                <div style="padding-bottom: 0px; padding-top: 0px" class="panel-body">
                                    <div class="schema-container">
                                    <dl style="margin-bottom: 0px" class="schema-properties">
                                        
                                        <dt>X-ID-TENANT-NAME</dt>
                                        <dd>
                                            


<div>Type: <code>string</code></div>







<div>Required: <code>true</code></div>







































<div>Identity domain ID for the Oracle Java Cloud Service account (on Oracle Public Cloud).<p>Tenant name for the Oracle Java Cloud Service instance (on Oracle Cloud Machine).</div>


<div class="panel-group" role="tablist" aria-multiselectable="true">


















                                        </dd>
                                        
                                    </dl>
                                        
                                   </div>
                                </div>
                            </div>
                            
                            

                            


                            
                            <div class="panel panel-default">

                                <div class="panel-heading">Body Parameter</div>
                                <div style="padding-bottom: 0px" class="panel-body">
                                    
                                    <div style="margin-bottom: 8px">The request body defines the details of the scale Coherence data tier cluster request.</div>
                                    

                                    <div class="schema-container">
                                    
                                    <div id="request-definitions-datatier-putrequest" class="panel panel-default swagger-schema">
<div class="panel-heading">Root Schema : datatier-putrequest</div>
<div class="panel-body">

    

















































<div class="panel-group" role="tablist" aria-multiselectable="true">








<div class="panel panel-default schema-panel">
  <div class="panel-heading" role="tab" id="collapseListGroupHeading-request-definitions-datatier-putrequest-properties">
    <a role="button" data-toggle="alt-collapse" href="#collapseListGroup-request-definitions-datatier-putrequest-properties" aria-expanded="false" aria-controls="collapseListGroup-request-definitions-datatier-putrequest-properties">
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> Properties
    </a>
  </div>
  <div id="collapseListGroup-request-definitions-datatier-putrequest-properties" class="panel-collapse collapse" role="tabpanel" aria-labelledby="collapseListGroupHeading-request-definitions-datatier-putrequest-properties" aria-expanded="false">
    <dl class="list-group schema-properties">
        
        <dt>force</dt>
        <dd>
            
            
<div>Type: <code>boolean</code></div>





























<div>Flag that specifies whether you want to force the removal of a capacity unit during a scale in operation. This value defaults to false. Set to true if you want the scale in operation to remove a capacity unit even if there's any failure during the scaling process.</div>



            
        </dd>
        
        <dt>scalingUnitCount</dt>
        <dd>
            
            
<div>Type: <code>string</code></div>





<div>Required: <code>true</code></div>

























<div>Number of capacity units requested for the entire Coherence data tier. Cannot be 0 (zero).<p>For example, if the current capacity unit count is 1 (one), and you specify a count of 2 (two) in the JSON file, the scaling operation performs a scale out to add one more capacity unit. If the current capacity unit count is 2 (two), and you specify a count of 1 (one) in the JSON file, the scaling operation performs a scale in to remove one capacity unit. Note that you can scale out by one capacity unit at a time only.<p>The number of VMs and Managed Servers to add or remove during a scaling operation is based on the capacity unit definition declared for the service instance. For example, if a capacity unit definition manages 1 VM and 1 Managed Server per VM, a scaling operation either adds or removes 1 VM and 1 Managed Server for each capacity unit added or removed.</div>



            
        </dd>
        
    </dl>
  </div>
</div>












</div>
</div>
</div>
                                    
                                    </div>

                                    
                                    
                                    
                                    		
                                </div>
                            </div>
                            



                            


                        </div>
                        <div role="tabpanel" class="tab-pane fade" id="response">
                            <h3 class="visible-print-block">Response</h3>

                            
                            
                            <div class="panel panel-default">
                                <div class="panel-heading">Supported Media Types</div>
                                <div class="panel-body">
                                    <ul class="list-group">
                                        
                                        <li class="list-group-item">application/json</li>
                                                    
                                    </ul>
                                </div>
                            </div>
                            
                            



                            
                            <div class="panel panel-default">

                                <div class="panel-heading">202 Response <span class="glyphicon glyphicon-ok-sign response-symbol" data-response-code="202" aria-hidden="true"></span></div>
                                <div class="panel-body">
                                    Accepted. See <a href='http://www.oracle.com/pls/topic/lookup?ctx=cloud&id=jcs_rest_statuscodes'>Status Codes</a> for information about other possible HTTP status codes.
                                </div>

                                
                                

                                

                            </div>
                            
                            <div class="panel panel-default">

                                <div class="panel-heading">400 Response <span class="glyphicon glyphicon-alert response-symbol" data-response-code="400" aria-hidden="true"></span></div>
                                <div class="panel-body">
                                    Bad Request. Returned if:<ul><li>The service instance is in a state other than Running. Oracle Java Cloud Service ensures that the service instance is in a Running state before a job is created for the operation to be carried out. In this case, the following message is returned:<code>Service is not in Running state, current state is [<i>Current Operation State</i>]. The service needs to be in a Running state for datagrid operations to be carried out</code></li><li>A second request is received.</li><li>The capacity unit count requested is equal to the existing count. In this case, the following message is returned: <code>The number of scaling units in the cluster is equal to the number of scaling units requested. No scaling operation will be carried out.</code></li><li>The service level of the service instance is Oracle Java Cloud Service-Virtual Image or BASIC. The following message is returned:<code>The service [<i>Service Instance Name</i>] cannot be scaled. The service level is [BASIC] while the minimum service level to support scaling is [PAAS]</code></li></ul>
                                </div>

                                
                                

                                

                            </div>
                            


                        </div>
                        
                        <div role="tabpanel" class="tab-pane fade" id="examples">
                            <h3>Examples</h3>
                            <div class="body conbody">
 <p class="p">The following example shows how to scale the Coherence data tier an Oracle Java Cloud Service instance by submitting a PUT request on the REST resource using cURL.</p> 
 <p class="p"><strong class="ph b">Note:</strong> The command in this example uses the URL structure <samp class="ph codeph">https://rest_server_url/<em class="ph i">resource-path</em></samp>, where <samp class="ph codeph">rest_server_url</samp> is the Oracle Public Cloud or Oracle Cloud Machine REST server to contact for your identity domain or tenant name. See <a class="xref" href="SendRequests.html" target="_blank">Send Requests</a> for the appropriate URL structure to use on Oracle Public Cloud or Oracle Cloud Machine.</p> 
 <div class="section">
  <h3 class="title sectiontitle">cURL Command</h3>
  <pre class="pre">curl -i -X PUT -u username:userPassword1! -d @scaledgcluster.json -H "X-ID-TENANT-NAME:ExampleIdentityDomain" -H "Content-Type:application/vnd.com.oracle.oracloud.datagrid.Service+json" https://rest_server_url/paas/service/jcs/api/v1.1/instances/ExampleIdentityDomain/Example1Instance/clusters/Example1_DGCluster</pre> 
 </div> 
 <div class="section">
  <h3 class="title sectiontitle">Example of Request Body</h3>
  <p class="p">The following shows an example of the request body in JSON format.</p> 
  <pre class="pre">{
  "scalingUnitCount" : "2"
}
</pre> 
  <p class="p">The following shows an example using the <samp class="ph codeph">force</samp> parameter (optional) for a scale in operation.</p> 
  <pre class="pre">{
  "scalingUnitCount" : "1",
  "force" : "true"
}</pre> 
 </div> 
 <div class="section">
  <h3 class="title sectiontitle">Example of Response Header</h3>
  <p class="p">The following shows an example of the response header.</p> 
  <p class="p">The <samp class="ph codeph">Location</samp> header returns the REST resource that can be used to access the status of the scale request. For more information, see <a class="xref" href="op-paas-service-jcs-api-v1.1-instances-%7BidentityDomainId%7D-status-%7BrequestName%7D-job-%7BjobId%7D-get.html" target="_blank">View the Status of a Service Instance Lifecycle Operation</a>.</p> 
  <pre class="pre">HTTP/1.1 202 Accepted
Date: Sat, 10 Oct 2015 21:06:04 GMT
Location: https://rest_server_url/paas/service/jcs/api/v1.1/instances/ExampleIdentityDomain/status/scale/job/239610
Content-Length: 0
Content-Type: application/vnd.com.oracle.oracloud.datagrid.Service+json
Service-URI: https://rest_server_url/paas/service/jcs/api/v1.1/instances/ExampleIdentityDomain/Example1Instance/clusters/Example1_DGCluster
Retry-After: 60</pre> 
 </div> 
 <div class="section">
  <h3 class="title sectiontitle">Example of Response Body (Scale Out, View Status)</h3>
  <p class="p">The following shows an example of the response body when you check the status of a scale operation performing a scale out.</p> 
  <pre class="pre">{
  "service_name": "Example1Instance",
  "version": "12cR3",
  "wlsVersion": "12.1.3.0.160419",
  "status": "Running",
  "error_status_desc": "",
  "compliance_status": "",
  "compliance_status_desc": "",
  "auto_update": "true",
  "description": "Example description",
  "identity_domain": "ExampleIdentityDomain",
  "creation_time": "Fri Oct 9 0:4:44 UTC 2015",
  "last_modified_time": "Sat Oct 10 21:33:32 UTC 2015",
  "created_by": "username",
  "service_uri": "https:\/\/rest_server_url\/paas\/service\/jcs\/api\/v1.1\/instances\/ExampleIdentityDomain\/Example1Instance",
  "message": [
    "Successfully scaled out cluster [Example1_DGCluster]",
    "Successfully scaled out cluster [Example1_DGCluster]",
    "    Successfully created capacity unit(s)...",
    "    Starting capacity unit...",
    "    Successfully started capacity unit...",
    "    Starting to transfer keys to the datagrid VMs",
    "    Finished transferring keys to datagrid VMs",
    "    Successfully transferred keys to [example1instance-wls-4]",
    "    Checking managed servers...",
    "    Successfully checked managed servers...",
    "    Performing Service Reachability Check (SRC) of Datagrid Managed Servers.",
    "    Successfully completed Service Reachability Check (SRC) of Datagrid Managed Servers.",
    "    Successfully created capacity unit(s)...",
    "    Successfully created capacity unit(s)...",
    "        Configuration check for Host [example1instance-wls-4] containing WebLogic Managed Server(s) [[Example1_server_4_DG]] completed...",
    "        Service Reachabilty Check (SRC) of WebLogic Administration Server completed...",
    "        Service Reachabilty Check (SRC) of WebLogic Managed Server(s) [Example1_server_1, Example1_server_2, Example1_server_3_DG, Example1_server_4_DG] completed..."
  ]
}</pre> 
 </div> 
 <div class="section">
  <h3 class="title sectiontitle">Example of Response Body (Scale In, View Status)</h3>
  <p class="p">The following shows an example of the response body when you check the status of a scale operation performing a scale in.</p> 
  <pre class="pre">{
  "service_name": "Example1Instance",
  "version": "12cR3",
  "wlsVersion": "12.1.3.0.160419",
  "status": "Running",
  "error_status_desc": "",
  "compliance_status": "",
  "compliance_status_desc": "",
  "auto_update": "true",
  "description": "Example description",
  "identity_domain": "ExampleIdentityDomain",
  "creation_time": "Fri Oct 9 0:4:44 UTC 2015",
  "last_modified_time": "Sat Oct 10 21:33:32 UTC 2015",
  "created_by": "username",
  "service_uri": "https:\/\/rest_server_url\/paas\/service\/jcs\/api\/v1.1\/instances\/ExampleIdentityDomain\/Example1Instance",
  "message": [
    "Successfully scaled in cluster [1].",
    "    Deleting capacity unit(s) containing [1] virtual machines...",
    "    Started shutting down and removing managed servers from Admin.",
    "    Started shutting down and removing managed servers from Admin.",
    "    Completed removing managed servers from Admin.",
    "    Stopping and removing resources for capacity unit(s) containing [1] virtual machines...",
    "    Successfully deleted capacity unit(s) and [1] virtual machines",
    "Successfully scaled in cluster [Example1_DGCluster]."
  ]
}</pre> 
 </div> 
</div>
                        </div>
                        
                    </div>

                </div>

            </section>

            
        </article>
    </body>
</html>
